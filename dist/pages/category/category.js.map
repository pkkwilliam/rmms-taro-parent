{"version":3,"file":"pages/category/category.js","sources":["webpack:///./src/pages/category/category.jsx","webpack:///./src/pages/category/category.jsx?e229"],"sourcesContent":["import React from \"react\";\nimport ApplicationComponent from \"../../common/applicationComponent\";\nimport CategoryView from \"./category.view\";\nimport { ITEM_DETAIL } from \"../../routes/applicationRoutes\";\n\nconst SEGMENT_TYPE = [\n  { label: \"出租\", value: \"RENT\" },\n  { label: \"買賣\", value: \"SELL\" },\n];\n\nexport default class Category extends ApplicationComponent {\n  state = {\n    currentCategoryIndex: 0,\n    currentSegmentTypeIndex: 0,\n  };\n\n  async componentDidMount() {\n    const { currentCategoryIndex } = this.appState.shortTermMemory;\n  }\n\n  render() {\n    const { category, item } = this.appState;\n    const { currentSegmentTypeIndex } = this.state;\n    const sortedItems = this.sortItems(item.items, currentSegmentTypeIndex);\n    return (\n      <CategoryView\n        categories={category.categories}\n        categoriesItems={this.transfromItemsToNav(sortedItems)}\n        onChangeSegmentType={this.onChangeSegmentType}\n        onClickCategory={this.onClickCategory}\n        onClickItem={this.onClickItem}\n        {...this.state}\n      />\n    );\n  }\n\n  onChangeSegmentType = (segmentType) => {\n    this.setState({\n      currentSegmentTypeIndex: segmentType,\n    });\n  };\n\n  onClickCategory = (categoryIndex) => {\n    this.setState({\n      currentCategoryIndex: categoryIndex,\n    });\n  };\n\n  onClickItem = (item) => {\n    this.goTo(ITEM_DETAIL, [{ key: \"itemId\", value: item.id }]);\n  };\n\n  sortItems(items, currentSegmentTypeIndex) {\n    const segmentTypeValue = SEGMENT_TYPE[currentSegmentTypeIndex].value;\n    return items.filter((item) => item.listingType === segmentTypeValue);\n  }\n\n  transfromItemsToNav(items) {\n    let navItems = [];\n    items.forEach((item) => {\n      item.categories.forEach((category) => {\n        const { sequence } = category;\n        if (!navItems[sequence]) {\n          navItems[sequence] = [];\n        }\n        navItems[sequence] = [...navItems[sequence], item];\n      });\n    });\n    return navItems;\n  }\n}\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./category.jsx\"\nvar config = {\"navigationBarTitleText\":\"源代碼RMMS系統展示\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/category/category', {root:{cn:[]}}, config || {}))\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;;;;;;;;;;;;;;;;AACA;AACA;AACA;AAFA;AACA;AAwBA;AACA;AACA;AADA;;;AAKA;AACA;AACA;AADA;;;AAKA;AACA;AAAA;AAAA;AAAA;;;;;;;;;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AALA;AASA;;;AAkBA;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AALA;AADA;AASA;AACA;;;;AA3DA;AACA;;;;;;;;;;;;;;ACXA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}